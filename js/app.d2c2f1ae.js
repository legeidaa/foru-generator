(function(){"use strict";var e={5707:function(e,t,n){var o=n(9242),r=n(3396),l=n(7139);const s={class:"container"},d={class:"container"},i={class:"settings"},a={class:"result-object"},c={class:"result-object__header"},u=(0,r._)("h3",null,"Элементы",-1),p=(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"#aaa","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-copy","data-v-3b801528":""},[(0,r._)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2","data-v-3b801528":""}),(0,r._)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1","data-v-3b801528":""})],-1),h=[p],g={ref:"hiddenHTML",class:"hiddenHTML"};function f(e,t,n,o,p,f){const m=(0,r.up)("CodeEditor"),b=(0,r.up)("DropdownSelect");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",s,[(0,r.Wm)(m,(0,r.dG)({class:"atom_one_dark code_editor_custom",languages:[["HTML","HTML"]],modelValue:p.content,"onUpdate:modelValue":t[0]||(t[0]=e=>p.content=e),wrap_code:!0},f.getTextareaAttrs),null,16,["modelValue"]),(0,r.Wm)(m,(0,r.dG)({languages:[["HTML","HTML"]],modelValue:p.result,"onUpdate:modelValue":t[1]||(t[1]=e=>p.result=e),wrap_code:!0},f.getTextareaAttrs),null,16,["modelValue"])]),(0,r._)("div",d,[(0,r._)("div",i,[(0,r.Wm)(b,{blockTypes:p.blockTypes,selectedBlockType:p.selectedBlockType,onSelectType:f.selectType},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(p.selectedBlockType),1)])),_:1},8,["blockTypes","selectedBlockType","onSelectType"]),(0,r._)("button",{class:"button",onClick:t[2]||(t[2]=(...e)=>f.addAttrs&&f.addAttrs(...e))},"Проставить атрибуты")]),(0,r._)("div",a,[(0,r._)("div",c,[u,(0,r._)("div",{onClick:t[3]||(t[3]=(...e)=>f.copyElementsObject&&f.copyElementsObject(...e)),class:"copy_code",tabindex:"0","data-v-3b801528":"","data-v-76b5d460":"",style:{width:"16px",height:"16px"}},h)]),(0,r._)("div",{ref:"elemntsResult",class:"result-object__result"},(0,l.zw)(p.elements),513)])]),(0,r._)("div",g,null,512)])}var m=n(7393);const b={class:"dropdown-select"},v={class:"dropdown-select__menu"},w=["onClick"];function y(e,t,n,s,d,i){return(0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("button",{class:(0,l.C_)(["dropdown-select__text",{open:d.dropdownOpened}]),onClick:t[0]||(t[0]=(...e)=>i.toggleDropdown&&i.toggleDropdown(...e)),onBlur:t[1]||(t[1]=e=>d.dropdownOpened=!1)},[(0,r.WI)(e.$slots,"default")],34),(0,r.Wm)(o.uT,{name:"slide"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r._)("div",v,[(0,r._)("ul",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.blockTypes,(t=>((0,r.wg)(),(0,r.iD)("li",{class:(0,l.C_)([{active:t==this.selectedBlockType},"dropdown-select__item"]),key:t,onClick:n=>e.$emit("selectType",t)},(0,l.zw)(t),11,w)))),128))])],512),[[o.F8,d.dropdownOpened]])])),_:1})])}var _={name:"DropdownSelect",props:{blockTypes:Array,selectedBlockType:String},data(){return{dropdownOpened:!1}},methods:{toggleDropdown(){this.dropdownOpened=!this.dropdownOpened}}},k=n(89);const T=(0,k.Z)(_,[["render",y]]);var A=T,x={name:"ForuGenerator",components:{CodeEditor:m.Z,DropdownSelect:A},data(){return{blockTypes:["Табы","Обложка","Цены","Подвал"],selectedBlockType:"Табы",content:'<div onclick="alert(1)" class="trade__form-input" tabindex="0">\n        Текстовый узел\n        <div></div>\n        <input style="display: block; opacity: 0.9" elementid="elmqbeaq2562osaqdsokq9wr" type="number" value="45271.59">\n        <label>Цена</label>\n        <div class="trade__form-input-tooltip">\n            Введите объем <b>покупки</b>\n        </div>\n        <a id="link" href="vk.com">Ссылка</a>\n        <img />\n    </div>',result:"",elements:""}},computed:{getTextareaAttrs(){return{width:"100%",height:"400px",border_radius:"8px"}}},mounted(){this.$refs.hiddenHTML.innerHTML=this.content},methods:{copyElementsObject(){var e=document.createRange();e.selectNode(this.$refs.elemntsResult),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),window.getSelection().removeAllRanges()},selectType(e){this.selectedBlockType=e},generateId(){function e(e,t){t=t||"abcdefghijklmnopqrstuvwxyz0123456789";var n="",o=0;while(o<e){let e=Math.floor(Math.random()*t.length);n+=t.substring(e,e+1),o++}return n}return"el"+e(5,null).toLowerCase()},addClasses(e,t,n){let o=Array.from(e.classList).join(" ");""==o&&(o=""),n["classes"]=o,e.setAttribute("ng-class",`sitecontent['${t}']['classes']`)},addStyle(e,t,n){let o=e.getAttribute("style"),r={};if(null!==o&&""!==o){const e=/([\w-]*)\s*:\s*([^;]*)/g;for(let t=0;t<o.split(";").length;t++){const t=e.exec(o);r[t[1]]=t[2].trim()}}n["style"]=r,e.setAttribute("ng-style",`sitecontent['${t}']['style']`)},addModelId(e,t,n){let o=e.getAttribute("id");null!=o&&(n["modelid"]=o),e.setAttribute("ng-attr-modelid",`{{sitecontent['${t}']['modelid']}}`)},addModel(e,t,n){if(0==e.children.length&&e.childNodes.length>0){e.setAttribute("ng-model",`sitecontent['${t}']['text']`);let o=e.textContent;o=o.replace(/\n/g,"").replace(/\s+/g," "),n["text"]=o,e.innerHTML=""}},addAttrs(){const e=this.$refs.hiddenHTML,t=e.querySelectorAll("*"),n={};let o=[];t.forEach((e=>{let t=null,r=e.childNodes;e.hasAttribute("elementid")?t=e.getAttribute("elementid"):(t=this.generateId(),e.setAttribute("elementid",t)),n[t]={};const l=n[t];this.addClasses(e,t,l),this.addStyle(e,t,l),this.addModelId(e,t,l),this.addModel(e,t,l);for(let n=0;n<r.length;n++)if(3==r[n].nodeType&&""!=r[n].textContent.trim()&&e==r[n].parentNode&&e.children.length>0){const e=document.createElement("div");r[n].data.trim(),r[n].after(e),e.appendChild(r[n]),o.push(e)}if("A"===e.tagName){const n=e.getAttribute("href");let o=e.getAttribute("target");n?(e.setAttribute("ng-href",`{{sitecontent['${t}']['href']}}`),l["href"]=n,e.removeAttribute("href")):alert("У ссылки (тега а) отсутствует атрибут href"),o||(o="_self"),e.setAttribute("ng-attr-target",`{{sitecontent['${t}']['target']}}`),l["target"]=o,e.removeAttribute("target")}if("IMG"===e.tagName){const n=e.getAttribute("src");n?(e.setAttribute("ng-src",`{{sitecontent['${t}']['src']}}`),l["src"]=n,e.removeAttribute("src")):alert("У изображения (тега img) отсутствует атрибут src")}console.log(e.tagName,l)})),o.forEach((e=>{let t=this.generateId();n[t]={};const o=n[t];this.addClasses(e,t,o),this.addStyle(e,t,o),this.addModel(e,t,o),console.log(e.tagName,o)})),console.log(n),this.elements=n,this.result=e.innerHTML}}};const M=(0,k.Z)(x,[["render",f]]);var O=M;(0,o.ri)(O).mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,l){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],l=e[c][2];for(var d=!0,i=0;i<o.length;i++)(!1&l||s>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(d=!1,l<s&&(s=l));if(d){e.splice(c--,1);var a=r();void 0!==a&&(t=a)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[o,r,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,l,s=o[0],d=o[1],i=o[2],a=0;if(s.some((function(t){return 0!==e[t]}))){for(r in d)n.o(d,r)&&(n.m[r]=d[r]);if(i)var c=i(n)}for(t&&t(o);a<s.length;a++)l=s[a],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(c)},o=self["webpackChunkforu_generator"]=self["webpackChunkforu_generator"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5707)}));o=n.O(o)})();
//# sourceMappingURL=app.d2c2f1ae.js.map